#config_version=6                 
mode:
  start_events: selection_mode_drillchair_selected
  stop_events: stop_mode_drillchair, mode_drillchair_complete, ball_ended, ball_will_end, player_drillchair_drillchair_60s_timer_tick{value < 1}
 
sequences:
  drillchair:
    events:
      - drillchair_pops_complete
      - left_loop_hit
      - drillchair_pops2_complete
      - left_loop_hit
    reset_on_complete: false
    events_when_complete: mode_drillchair_complete, stop_mode_drillchair
 
timers:
  drillchair_60s_timer:
    start_value: 69
    end_value: 0
    direction: down
    control_events:
      - action: start
        event: mode_drillchair_started

counters:
  drillchair_pops_counter:
    starting_count: 0
    count_complete_value: 20
    enable_events: enable_qualify
    disable_events: disable_qualify
    start_enabled: true
#    persist_state: true
    reset_on_complete: false
    events_when_complete: drillchair_pops_complete   
    count_events: lower_l_pop_hit, lower_r_pop_hit, up_b_pop_hit
  drillchair_pops2_counter:
    starting_count: 0
    count_complete_value: 20
    enable_events: logicblock_drillchair_hit{step==2}
    disable_events: disable_qualify
    start_enabled: false
#    persist_state: true
    reset_on_complete: false
    events_when_complete: drillchair_pops2_complete   
    count_events: lower_l_pop_hit, lower_r_pop_hit, up_b_pop_hit    
    

shots:
  lower_l_pop:
    switch: s_left_bottom_jet_bumper
  lower_r_pop:
    switch: s_right_bottom_jet_bumper
  up_b_pop:
    switch: s_upper_bottom_jet_bumper 

    

variable_player:
  logicblock_drillchair_hit{step==1}:
    score: 1000000
  logicblock_drillchair_hit{step==3}:
    score: 1000000
  mode_drillchair_complete:
    score: 6500000   
  counter_drillchair_pops_counter_hit:
    drillchair_pops_counter:
      action: set
      int: (count)*34
    drillchair_visual_pops_counter:
      action: set
      int: (count)
  counter_drillchair_pops2_counter_hit:    
    drillchair_visual_pops2_counter:
      action: set
      int: (count)      
       
  timer_your_timer_tick:
    drillchair_60s_timer:
      int: device.timers.your_timer.ticks_remaining
      action: set
 
slides:
  drillchairvideo:
    widgets:
    - type: video
      video: drillchairvideo  
      
  drillchair_pops:
    widgets:
    - type: Text
      text: Aim for the Lower Pop Bumpers!
      font_name: TrajanProRegular
      font_size: 75
      color: d8d8d8
      
    - type: image
      image: hacksawUI
      opacity: 0.5
      y: 1
      x: 1
      anchor_x: left
      anchor_y: bottom
    - type: text
      text: (score)
      number_grouping: true
      y: 16
      x: 25
      font_size: 36
      anchor_x: left
      anchor_y: bottom
      font_name: TrajanProRegular
      color: ff6700
      
    - type: Text
      text: 00:(player|drillchair_drillchair_60s_timer_tick)
      font_size: 100
      font_name: digitalclockfont
      color: red
      x: 50%
      y: 83.2%
    - type: rectangle
      width: 420
      height: 130
      x: 50%
      y: 84.5%
      corner_radius: 20
      corner_segments: 20
      color: black
      
    - type: rectangle
      width: 0
      height: 45
      x: 25%
      y: 180
      anchor_x: left
      corner_radius: 10
      corner_segments: 10
      color: ff6700
      animations:
        player_drillchair_pops_counter:
         - property: width
           value: (value)           
    - type: rectangle
      width: 685
      height: 46
      x: 50%
      y: 180
      color: black
      corner_radius: 10
      corner_segments: 10
      
#    - type: Text
#      text: Seconds Left
#      font_size: 50
#      font_name: TrajanProRegular
#      color: 65fe08
#      x: 825
#      y: 85%
    - type: Text
      text: (player|drillchair_visual_pops_counter) / 20 lower pops
      font_size: 50
      font_name: TrajanProRegular
      color: d8d8d8
      y: 35%
    - type: Text
      text: You Have 60 Seconds To Hit 20 Lower Pop Bumpers!
      color: ff6700
      font_name: TrajanProRegular
      font_size: 35
      y: 17%
      animations:
       pre_show_slide:
        - property: opacity
          value: 0
          duration: 1s
        - property: opacity
          value: 1
          duration: 1s
          repeat: true
    - type: image
      image: drillchairimg
      opacity: 0.65
    transition:
     type: fade
     duration: 0.2s
 
  drillchair_phase2:
    widgets:   
    - type: Text
      text: "- Hit The Left Loop"
      font_size: 52
      font_name: TrajanProRegular
      color: d8d8d8 
      x: 405
      y: 66%    
    - type: Text
      text: "- (player|drillchair_visual_pops2_counter) /20 lower pops"
      font_size: 52
      font_name: TrajanProRegular
      color: d8d8d8 
      x: 385
      y: 56%    
    - type: Text
      text: " to disable the right drill!"
      font_size: 52
      font_name: TrajanProRegular
      color: d8d8d8 
      x: 552
      y: 50%          
    - type: Text
      text: "- Hit The Left Loop To Escape"
      font_size: 52
      font_name: TrajanProRegular
      color: d8d8d8 
      x: 552
      y: 40%
    - type: Text
      text: " & Complete The Trap"
      font_size: 52
      font_name: TrajanProRegular
      color: d8d8d8 
      x: 467
      y: 34%
      
    - type: image
      image: hacksawUI
      opacity: 0.5
      y: 1
      x: 1
      anchor_x: left
      anchor_y: bottom
    - type: text
      text: (score)
      number_grouping: true
      y: 16
      x: 25
      font_size: 36
      anchor_x: left
      anchor_y: bottom
      font_name: TrajanProRegular
      color: ff6700
      
    - type: Text
      text: 00:(player|drillchair_drillchair_60s_timer_tick)
      font_size: 100
      font_name: digitalclockfont
      color: red
      x: 50%
      y: 83.2%
    - type: rectangle
      width: 420
      height: 130
      x: 50%
      y: 84.5%
      corner_radius: 20
      corner_segments: 20
      color: black
                
    - type: image
      image: drillchairimg
      opacity: 0.4
    transition:
     type: fade
     duration: 0.2s


      
slide_player:
  mode_drillchair_started: 
    drillchairvideo:
      priority: 500
      expire: 8.7s
  slide_drillchairvideo_removed: 
    drillchair_pops:
      priority: 400
      expire: 66.5s
  drillchair_pops_complete:
    drillchair_phase2:
      priority: 405
      expire: 60.5s
      
widgets:
   dc_shot_update2:
    - type: Text
      text: X
      color: ff6700
      x: 5.5%
      y: 66%
      font_size: 70
      font_name: TrajanProRegular
   dc_shot_update3:
    - type: Text
      text: X
      color: ff6700
      x: 5.5%
      y: 56%
      font_size: 70
      font_name: TrajanProRegular      

 
widget_player:
 logicblock_drillchair_hit{step==2}: 
  dc_shot_update2:
    slide: drillchair_phase2
 logicblock_drillchair_hit{step==3}: 
  dc_shot_update3:
    slide: drillchair_phase2    

sound_player:
  mode_drillchair_started:
    drillchair:
      action: play  
    DrillChairModeStart:
      delay: 6s
      action: play      
  player_drillchair_drillchair_60s_timer_tick{value < 1}:
    DrillChairModeStart:
      action: stop      

shows:
  drillchair_pops_progress:    
    - duration: -1      
      lights:    
        (leds): (color1)

show_player:
  mode_drillchair_started:     
    gi_on:
      show_tokens:
        color1: drillchair     

# pops progress
  logicblock_drillchair_pops_counter_hit{count==1}:
      drillchair_pops_progress:
        loops: -1
        show_tokens:
          leds: l_left_bottom_bumper_1, l_right_bottom_bumper_1, l_top_bottom_bumper_1
          color1: drillchair
  logicblock_drillchair_pops_counter_hit{count==3}:
      drillchair_pops_progress:
        loops: -1
        show_tokens:
          leds: l_left_bottom_bumper_1, l_right_bottom_bumper_1, l_top_bottom_bumper_1, l_left_bottom_bumper_2, l_right_bottom_bumper_2, l_top_bottom_bumper_2, l_left_bottom_bumper_16, l_right_bottom_bumper_16, l_top_bottom_bumper_16
          color1: drillchair
  logicblock_drillchair_pops_counter_hit{count==5}:
      drillchair_pops_progress:
        loops: -1
        show_tokens:
          leds: l_left_bottom_bumper_1, l_right_bottom_bumper_1, l_top_bottom_bumper_1, l_left_bottom_bumper_2, l_right_bottom_bumper_2, l_top_bottom_bumper_2, l_left_bottom_bumper_16, l_right_bottom_bumper_16, l_top_bottom_bumper_16, l_left_bottom_bumper_3, l_right_bottom_bumper_3, l_top_bottom_bumper_3, l_left_bottom_bumper_15, l_right_bottom_bumper_15, l_top_bottom_bumper_15
          color1: drillchair
  logicblock_drillchair_pops_counter_hit{count==8}:
      drillchair_pops_progress:
        loops: -1
        show_tokens:
          leds: l_left_bottom_bumper_1, l_right_bottom_bumper_1, l_top_bottom_bumper_1, l_left_bottom_bumper_2, l_right_bottom_bumper_2, l_top_bottom_bumper_2, l_left_bottom_bumper_16, l_right_bottom_bumper_16, l_top_bottom_bumper_16, l_left_bottom_bumper_3, l_right_bottom_bumper_3, l_top_bottom_bumper_3, l_left_bottom_bumper_15, l_right_bottom_bumper_15, l_top_bottom_bumper_15, l_left_bottom_bumper_4, l_right_bottom_bumper_4, l_top_bottom_bumper_4, l_left_bottom_bumper_14, l_right_bottom_bumper_14, l_top_bottom_bumper_14
          color1: drillchair
  logicblock_drillchair_pops_counter_hit{count==10}:
      drillchair_pops_progress:
        loops: -1
        show_tokens:
          leds: l_left_bottom_bumper_1, l_right_bottom_bumper_1, l_top_bottom_bumper_1, l_left_bottom_bumper_2, l_right_bottom_bumper_2, l_top_bottom_bumper_2, l_left_bottom_bumper_16, l_right_bottom_bumper_16, l_top_bottom_bumper_16, l_left_bottom_bumper_3, l_right_bottom_bumper_3, l_top_bottom_bumper_3, l_left_bottom_bumper_15, l_right_bottom_bumper_15, l_top_bottom_bumper_15, l_left_bottom_bumper_4, l_right_bottom_bumper_4, l_top_bottom_bumper_4, l_left_bottom_bumper_14, l_right_bottom_bumper_14, l_top_bottom_bumper_14, l_left_bottom_bumper_5, l_right_bottom_bumper_5, l_top_bottom_bumper_5, l_left_bottom_bumper_13, l_right_bottom_bumper_13, l_top_bottom_bumper_13
          color1: drillchair
  logicblock_drillchair_pops_counter_hit{count==12}:
      drillchair_pops_progress:
        loops: -1
        show_tokens:
          leds: l_left_bottom_bumper_1, l_right_bottom_bumper_1, l_top_bottom_bumper_1, l_left_bottom_bumper_2, l_right_bottom_bumper_2, l_top_bottom_bumper_2, l_left_bottom_bumper_16, l_right_bottom_bumper_16, l_top_bottom_bumper_16, l_left_bottom_bumper_3, l_right_bottom_bumper_3, l_top_bottom_bumper_3, l_left_bottom_bumper_15, l_right_bottom_bumper_15, l_top_bottom_bumper_15, l_left_bottom_bumper_4, l_right_bottom_bumper_4, l_top_bottom_bumper_4, l_left_bottom_bumper_14, l_right_bottom_bumper_14, l_top_bottom_bumper_14, l_left_bottom_bumper_5, l_right_bottom_bumper_5, l_top_bottom_bumper_5, l_left_bottom_bumper_13, l_right_bottom_bumper_13, l_top_bottom_bumper_13, l_left_bottom_bumper_6, l_right_bottom_bumper_6, l_top_bottom_bumper_6, l_left_bottom_bumper_12, l_right_bottom_bumper_12, l_top_bottom_bumper_12
          color1: drillchair
  logicblock_drillchair_pops_counter_hit{count==15}:
      drillchair_pops_progress:
        loops: -1
        show_tokens:
          leds: l_left_bottom_bumper_1, l_right_bottom_bumper_1, l_top_bottom_bumper_1, l_left_bottom_bumper_2, l_right_bottom_bumper_2, l_top_bottom_bumper_2, l_left_bottom_bumper_16, l_right_bottom_bumper_16, l_top_bottom_bumper_16, l_left_bottom_bumper_3, l_right_bottom_bumper_3, l_top_bottom_bumper_3, l_left_bottom_bumper_15, l_right_bottom_bumper_15, l_top_bottom_bumper_15, l_left_bottom_bumper_4, l_right_bottom_bumper_4, l_top_bottom_bumper_4, l_left_bottom_bumper_14, l_right_bottom_bumper_14, l_top_bottom_bumper_14, l_left_bottom_bumper_5, l_right_bottom_bumper_5, l_top_bottom_bumper_5, l_left_bottom_bumper_13, l_right_bottom_bumper_13, l_top_bottom_bumper_13, l_left_bottom_bumper_6, l_right_bottom_bumper_6, l_top_bottom_bumper_6, l_left_bottom_bumper_12, l_right_bottom_bumper_12, l_top_bottom_bumper_12, l_left_bottom_bumper_7, l_right_bottom_bumper_7, l_top_bottom_bumper_7, l_left_bottom_bumper_11, l_right_bottom_bumper_11, l_top_bottom_bumper_11
          color1: drillchair
  logicblock_drillchair_pops_counter_hit{count==18}:
      drillchair_pops_progress:
        loops: -1
        show_tokens:
          leds: l_left_bottom_bumper_1, l_right_bottom_bumper_1, l_top_bottom_bumper_1, l_left_bottom_bumper_2, l_right_bottom_bumper_2, l_top_bottom_bumper_2, l_left_bottom_bumper_16, l_right_bottom_bumper_16, l_top_bottom_bumper_16, l_left_bottom_bumper_3, l_right_bottom_bumper_3, l_top_bottom_bumper_3, l_left_bottom_bumper_15, l_right_bottom_bumper_15, l_top_bottom_bumper_15, l_left_bottom_bumper_4, l_right_bottom_bumper_4, l_top_bottom_bumper_4, l_left_bottom_bumper_14, l_right_bottom_bumper_14, l_top_bottom_bumper_14, l_left_bottom_bumper_5, l_right_bottom_bumper_5, l_top_bottom_bumper_5, l_left_bottom_bumper_13, l_right_bottom_bumper_13, l_top_bottom_bumper_13, l_left_bottom_bumper_6, l_right_bottom_bumper_6, l_top_bottom_bumper_6, l_left_bottom_bumper_12, l_right_bottom_bumper_12, l_top_bottom_bumper_12, l_left_bottom_bumper_7, l_right_bottom_bumper_7, l_top_bottom_bumper_7, l_left_bottom_bumper_11, l_right_bottom_bumper_11, l_top_bottom_bumper_11, l_left_bottom_bumper_8, l_right_bottom_bumper_8, l_top_bottom_bumper_8, l_left_bottom_bumper_10, l_right_bottom_bumper_10, l_top_bottom_bumper_10
          color1: drillchair
  logicblock_drillchair_pops_counter_hit{count==20}:
      drillchair_pops_progress:
        loops: -1
        show_tokens:
          leds: bottom_bumper
          color1: drillchair
#pops progress p2
  logicblock_drillchair_hit{step==2}:
      drillchair_pops_progress:
        loops: -1
        show_tokens:
          leds: bottom_bumper
          color1: off
  logicblock_drillchair_pops2_counter_hit{count==1}:
      drillchair_pops_progress:
        loops: -1
        show_tokens:
          leds: l_left_bottom_bumper_1, l_right_bottom_bumper_1, l_top_bottom_bumper_1
          color1: drillchair
  logicblock_drillchair_pops2_counter_hit{count==3}:
      drillchair_pops_progress:
        loops: -1
        show_tokens:
          leds: l_left_bottom_bumper_1, l_right_bottom_bumper_1, l_top_bottom_bumper_1, l_left_bottom_bumper_2, l_right_bottom_bumper_2, l_top_bottom_bumper_2, l_left_bottom_bumper_16, l_right_bottom_bumper_16, l_top_bottom_bumper_16
          color1: drillchair
  logicblock_drillchair_pops2_counter_hit{count==5}:
      drillchair_pops_progress:
        loops: -1
        show_tokens:
          leds: l_left_bottom_bumper_1, l_right_bottom_bumper_1, l_top_bottom_bumper_1, l_left_bottom_bumper_2, l_right_bottom_bumper_2, l_top_bottom_bumper_2, l_left_bottom_bumper_16, l_right_bottom_bumper_16, l_top_bottom_bumper_16, l_left_bottom_bumper_3, l_right_bottom_bumper_3, l_top_bottom_bumper_3, l_left_bottom_bumper_15, l_right_bottom_bumper_15, l_top_bottom_bumper_15
          color1: drillchair
  logicblock_drillchair_pops2_counter_hit{count==8}:
      drillchair_pops_progress:
        loops: -1
        show_tokens:
          leds: l_left_bottom_bumper_1, l_right_bottom_bumper_1, l_top_bottom_bumper_1, l_left_bottom_bumper_2, l_right_bottom_bumper_2, l_top_bottom_bumper_2, l_left_bottom_bumper_16, l_right_bottom_bumper_16, l_top_bottom_bumper_16, l_left_bottom_bumper_3, l_right_bottom_bumper_3, l_top_bottom_bumper_3, l_left_bottom_bumper_15, l_right_bottom_bumper_15, l_top_bottom_bumper_15, l_left_bottom_bumper_4, l_right_bottom_bumper_4, l_top_bottom_bumper_4, l_left_bottom_bumper_14, l_right_bottom_bumper_14, l_top_bottom_bumper_14
          color1: drillchair
  logicblock_drillchair_pops2_counter_hit{count==10}:
      drillchair_pops_progress:
        loops: -1
        show_tokens:
          leds: l_left_bottom_bumper_1, l_right_bottom_bumper_1, l_top_bottom_bumper_1, l_left_bottom_bumper_2, l_right_bottom_bumper_2, l_top_bottom_bumper_2, l_left_bottom_bumper_16, l_right_bottom_bumper_16, l_top_bottom_bumper_16, l_left_bottom_bumper_3, l_right_bottom_bumper_3, l_top_bottom_bumper_3, l_left_bottom_bumper_15, l_right_bottom_bumper_15, l_top_bottom_bumper_15, l_left_bottom_bumper_4, l_right_bottom_bumper_4, l_top_bottom_bumper_4, l_left_bottom_bumper_14, l_right_bottom_bumper_14, l_top_bottom_bumper_14, l_left_bottom_bumper_5, l_right_bottom_bumper_5, l_top_bottom_bumper_5, l_left_bottom_bumper_13, l_right_bottom_bumper_13, l_top_bottom_bumper_13
          color1: drillchair
  logicblock_drillchair_pops2_counter_hit{count==12}:
      drillchair_pops_progress:
        loops: -1
        show_tokens:
          leds: l_left_bottom_bumper_1, l_right_bottom_bumper_1, l_top_bottom_bumper_1, l_left_bottom_bumper_2, l_right_bottom_bumper_2, l_top_bottom_bumper_2, l_left_bottom_bumper_16, l_right_bottom_bumper_16, l_top_bottom_bumper_16, l_left_bottom_bumper_3, l_right_bottom_bumper_3, l_top_bottom_bumper_3, l_left_bottom_bumper_15, l_right_bottom_bumper_15, l_top_bottom_bumper_15, l_left_bottom_bumper_4, l_right_bottom_bumper_4, l_top_bottom_bumper_4, l_left_bottom_bumper_14, l_right_bottom_bumper_14, l_top_bottom_bumper_14, l_left_bottom_bumper_5, l_right_bottom_bumper_5, l_top_bottom_bumper_5, l_left_bottom_bumper_13, l_right_bottom_bumper_13, l_top_bottom_bumper_13, l_left_bottom_bumper_6, l_right_bottom_bumper_6, l_top_bottom_bumper_6, l_left_bottom_bumper_12, l_right_bottom_bumper_12, l_top_bottom_bumper_12
          color1: drillchair
  logicblock_drillchair_pops2_counter_hit{count==15}:
      drillchair_pops_progress:
        loops: -1
        show_tokens:
          leds: l_left_bottom_bumper_1, l_right_bottom_bumper_1, l_top_bottom_bumper_1, l_left_bottom_bumper_2, l_right_bottom_bumper_2, l_top_bottom_bumper_2, l_left_bottom_bumper_16, l_right_bottom_bumper_16, l_top_bottom_bumper_16, l_left_bottom_bumper_3, l_right_bottom_bumper_3, l_top_bottom_bumper_3, l_left_bottom_bumper_15, l_right_bottom_bumper_15, l_top_bottom_bumper_15, l_left_bottom_bumper_4, l_right_bottom_bumper_4, l_top_bottom_bumper_4, l_left_bottom_bumper_14, l_right_bottom_bumper_14, l_top_bottom_bumper_14, l_left_bottom_bumper_5, l_right_bottom_bumper_5, l_top_bottom_bumper_5, l_left_bottom_bumper_13, l_right_bottom_bumper_13, l_top_bottom_bumper_13, l_left_bottom_bumper_6, l_right_bottom_bumper_6, l_top_bottom_bumper_6, l_left_bottom_bumper_12, l_right_bottom_bumper_12, l_top_bottom_bumper_12, l_left_bottom_bumper_7, l_right_bottom_bumper_7, l_top_bottom_bumper_7, l_left_bottom_bumper_11, l_right_bottom_bumper_11, l_top_bottom_bumper_11
          color1: drillchair
  logicblock_drillchair_pops2_counter_hit{count==18}:
      drillchair_pops_progress:
        loops: -1
        show_tokens:
          leds: l_left_bottom_bumper_1, l_right_bottom_bumper_1, l_top_bottom_bumper_1, l_left_bottom_bumper_2, l_right_bottom_bumper_2, l_top_bottom_bumper_2, l_left_bottom_bumper_16, l_right_bottom_bumper_16, l_top_bottom_bumper_16, l_left_bottom_bumper_3, l_right_bottom_bumper_3, l_top_bottom_bumper_3, l_left_bottom_bumper_15, l_right_bottom_bumper_15, l_top_bottom_bumper_15, l_left_bottom_bumper_4, l_right_bottom_bumper_4, l_top_bottom_bumper_4, l_left_bottom_bumper_14, l_right_bottom_bumper_14, l_top_bottom_bumper_14, l_left_bottom_bumper_5, l_right_bottom_bumper_5, l_top_bottom_bumper_5, l_left_bottom_bumper_13, l_right_bottom_bumper_13, l_top_bottom_bumper_13, l_left_bottom_bumper_6, l_right_bottom_bumper_6, l_top_bottom_bumper_6, l_left_bottom_bumper_12, l_right_bottom_bumper_12, l_top_bottom_bumper_12, l_left_bottom_bumper_7, l_right_bottom_bumper_7, l_top_bottom_bumper_7, l_left_bottom_bumper_11, l_right_bottom_bumper_11, l_top_bottom_bumper_11, l_left_bottom_bumper_8, l_right_bottom_bumper_8, l_top_bottom_bumper_8, l_left_bottom_bumper_10, l_right_bottom_bumper_10, l_top_bottom_bumper_10
          color1: drillchair
  logicblock_drillchair_pops2_counter_hit{count==20}:
      drillchair_pops_progress:
        loops: -1
        show_tokens:
          leds: bottom_bumper
          color1: drillchair

event_player: 
  slide_drillchair_pops_active: e_primary_mode_active