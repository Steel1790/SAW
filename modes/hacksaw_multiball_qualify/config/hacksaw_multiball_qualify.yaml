#config_version=6
##! mode: hacksaw_multiball_qualify

mode:
  start_events: startmode_hacksaw_multiball_qualify
  priority: 160

accruals:
  acc_hacksaw_mb_qualify:
    events:
      - s_left_standup_right_ramp_active
      - s_right_standup_right_ramp_active
    reset_on_complete: false
    persist_state: true
    disable_on_complete: false
    reset_events: multiball_lock_mbl_hacksaw_locked_ball

counters:
  cnt_hacksaw_mb_counter:
    starting_count: 0
    count_complete_value: 3
    enable_events: 
    disable_events: 
    start_enabled: true
#    persist_state: true
    reset_on_complete: true
    disable_on_complete: false   
    count_events: multiball_lock_mbl_hacksaw_locked_ball

variable_player:
  logicblock_cnt_hacksaw_mb_counter_hit:
    hacksaw_mb_lock_counter:
      action: set
      int: (count)
  logicblock_hacksaw_multiball_qualify_complete:
    hacksaw_mb_lock_counter:
      action: set
      int: 0

shows:
  sh_hacksaw_mb_qualify_hit_ready:
    - duration: -1
      shows:
        flash_color:
          show_tokens:
            color: color_hacksaw_mb
            leds: (leds)
          speed: 4
  sh_hacksaw_mb_qualify_hit_locked:
    - duration: -1
      lights:
        (leds): color_hacksaw_mb
  sh_hacksaw_mb_end:
    - duration: -1
      lights:
        (leds): off
  sh_hacksaw_mb_qualify_hit:
    - duration: 0.3s
      lights:
        (leds): color_hacksaw_mb
    - duration: 0.3s
      lights:
        (leds): off

show_player:
  logicblock_acc_hacksaw_mb_qualify_complete{device.multiball_locks.mbl_hacksaw.locked_balls == 0}:
    sh_hacksaw_mb_qualify_hit_ready:
      show_tokens:
        leds: l_hmb_lock_1
  multiball_lock_mbl_hacksaw_locked_ball{device.multiball_locks.mbl_hacksaw.locked_balls == 1}:
    sh_hacksaw_mb_qualify_hit_locked:
      show_tokens:
        leds: l_hmb_lock_1
    hacksaw_mb_lock:
      loops: 0
      speed: 30
  logicblock_acc_hacksaw_mb_qualify_complete{device.multiball_locks.mbl_hacksaw.locked_balls == 1}:
    sh_hacksaw_mb_qualify_hit_ready:
      show_tokens:
        leds: l_hmb_lock_2
  multiball_lock_mbl_hacksaw_locked_ball{device.multiball_locks.mbl_hacksaw.locked_balls == 2}:
    sh_hacksaw_mb_qualify_hit_locked:
      show_tokens:
        leds: l_hmb_lock_1, l_hmb_lock_2
    hacksaw_mb_lock:
      loops: 0
      speed: 30
  logicblock_acc_hacksaw_mb_qualify_complete{device.multiball_locks.mbl_hacksaw.locked_balls == 2}:
    sh_hacksaw_mb_qualify_hit_ready:
      show_tokens:
        leds: l_hmb_lock_3
  multiball_lock_mbl_hacksaw_lock_locked_ball{device.multiball_locks.mbl_hacksaw.locked_balls == 3}:
    sh_hacksaw_mb_qualify_hit_locked:
      show_tokens:
        leds: l_hmb_lock_1, l_hmb_lock_2, l_hmb_lock_3
    hacksaw_mb_lock:
      loops: 0
      speed: 30
  multiball_mb_hacksaw_ended:
    sh_hacksaw_mb_end:
      show_tokens:
        leds: l_hmb_lock_1,l_hmb_lock_2,l_hmb_lock_3
  logicblock_acc_hacksaw_mb_qualify_hit{step==0}:
    sh_hacksaw_mb_qualify_hit:
      show_tokens:
        leds: l_left_standup_right_ramp_arrow
      speed: 4
      loops: 5
  logicblock_acc_hacksaw_mb_qualify_hit{step==1}:
    sh_hacksaw_mb_qualify_hit:
      show_tokens:
        leds: l_right_standup_right_ramp_arrow
      speed: 4
      loops: 5

slides:
  sl_Hacksaw_locked_1:
    widgets:
    - type: video
      video: hacksaw_lock1
      width: 1366
      height: 768 
  sl_Hacksaw_locked_2:
    widgets:
    - type: video
      video: hacksaw_lock2
      width: 1366
      height: 768 
  sl_Hacksaw_locked_3:
    widgets:
    - type: video
      video: hacksaw_lock3
      width: 1366
      height: 768 

slide_player:
  multiball_lock_mbl_hacksaw_locked_ball{device.multiball_locks.mbl_hacksaw.locked_balls == 1}:
    sl_Hacksaw_locked_1:
      priority: 500
      expire: 3s
  multiball_lock_mbl_hacksaw_locked_ball{device.multiball_locks.mbl_hacksaw.locked_balls == 2}:
    sl_Hacksaw_locked_2:
      priority: 500
      expire: 3s
  multiball_lock_mbl_hacksaw_lock_locked_ball{device.multiball_locks.mbl_hacksaw.locked_balls == 3}:
    sl_Hacksaw_locked_3:
      priority: 500
      expire: 3s